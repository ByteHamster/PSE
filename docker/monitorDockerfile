FROM ubuntu:16.04

RUN apt-get update && apt-get install --assume-yes --no-install-recommends openjfx openjdk-8-jdk maven git

WORKDIR /opt
RUN git clone https://github.com/ByteHamster/PSE.git
WORKDIR /opt/PSE/src
RUN git checkout monitoringController
RUN mvn package -Dmaven.test.skip=true
RUN mkdir /root/.osip
RUN echo "serverHostname_MIX=simulation\nserverHostname_YELLOW=simulation\nserverHostname_CYAN=simulation\nserverHostname_MAGENTA=simulation\n" > /root/.osip/monitoring.conf
CMD java -jar osip-monitoring-controller/target/osip-monitoring-controller-0.0.1-with-dependencies.jar

